<div class="flex flex-col bg-white border border-gray-200">
    <p class="text-lg text-custom-blue-darker font-bold py-4 px-8 border-b border-gray-200">Catégories</p>
    <ul class="border-b border-gray-200">
        {% for category in categories %}
            <li class="group">
                <a href="{{ path('app_product_index', {categorySlug: category.slug}) }}"
                   class="flex flex-row items-center gap-2 group-hover:bg-custom-blue/10  px-8 py-4 text-md text-custom-blue-darker group-hover:text-orange-400">
                    <svg class="transition-all group-hover:rotate-90 group-hover:text-orange-400 h-4 w-4 text-custom-blue-darker"
                         fill="none"
                         stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24"
                         xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path>
                    </svg>
                    <span>{{ category.name }}</span>
                </a>
                <ul class="hidden group-hover:block transition-all ">
                    {% for child in category.children %}
                        <li class="group hover:bg-custom-blue/10">
                            <a href="{{ path('app_product_index', { categorySlug: category.slug, subCategorySlug: child.slug }) }}"
                               class="block px-16 py-4 text-md text-custom-blue-darker hover:text-orange-400">{{ child.name }}
                            </a>
                        </li>
                    {% endfor %}
                </ul>
            </li>
        {% endfor %}
    </ul>
    <p class="text-lg text-custom-blue-darker font-bold py-4 px-8 border-b border-gray-200">Filtres</p>
    <div class="border-b border-gray-200">
        {{ form_start(filterForm) }}
        <div class="px-8 pt-2 mt-8 mb-4">
            <p class="text-md text-custom-blue-darker font-bold pb-2">Prix</p>
            <div id="range"></div>
            {{ form_widget(filterForm.price, {'attr': {'class': 'hidden'}}) }}
        </div>
        <div class="px-8 py-2">
            <p class="text-md text-custom-blue-darker font-bold pb-2">Marques</p>
            <div class="relative flex flex-col items-center gap-2">
                {% for brandRow in filterForm.brand %}
                    <div class="flex flex-row flex-wrap items-center w-full gap-4">
                        {{ form_widget(brandRow, {'attr': {'class': '', 'data-limit' : 3}}) }}
                        {{ form_label(brandRow, null, {'label_attr': {'class': ''}}) }}
                    </div>
                {% endfor %}
            </div>
        </div>
        <div class="px-8 py-2">
            <p class="text-md text-custom-blue-darker font-bold pb-2">Caractéristiques</p>
            <div class="relative flex flex-col gap-2 z-100">
                {% set previousType = null %}
                {% for caracteristicRow in filterForm.caracteristic %}
                    {% set caracteristicType = caracteristicRow.vars.attr['data-type'] %}
                    {% if caracteristicType != previousType %}
                        {% if previousType is not null %}
            </div><!-- close previous type div -->
                        {% endif %}
            <div class="">
                <p class="caracteristic-type text-md text-custom-blue pb-2">{{ caracteristicType }}</p>
                    {% endif %}
                <div class=" flex flex-row flex-wrap items-center w-full gap-4">
                    {{ form_widget(caracteristicRow) }}
                    {{ form_label(caracteristicRow) }}
                </div>
                {% set previousType = caracteristicType %}
                {% endfor %}
                {% if previousType is not null %}
            </div><!-- close last type div -->
                {% endif %}
        </div>
    </div>

    <div class="px-8 py-4">
        <button type="submit" class="bg-custom-blue-darker text-white px-8 py-2 rounded-full">Filtrer</button>
    </div>
    {{ form_end(filterForm) }}
</div>
